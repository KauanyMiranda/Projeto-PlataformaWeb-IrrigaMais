<div class="container-fluid px-4">
  <ol class="breadcrumb mb-4">
  </ol>

  <div class="row justify-content-center">
    <div class="col-xl-6">
      <div id="container">
        {{#if clima}}
          <div id="weather" class="show">
            <h1 id="title">{{clima.cidade}}, {{clima.pais}}</h1>

            <div id="infos">
              <div id="temp">
                <img id="temp_img" src="{{clima.icone}}" alt="icone do clima">
                <div>
                  <p id="temp_value">{{clima.temp}} <sup>°C</sup></p>
                  <p id="temp_description">{{clima.descricao}}</p>
                </div>
              </div>

              <div id="other_infos">
                <div class="info">
                  <i id="temp_max_icon" class="fa-solid fa-temperature-high"></i>
                  <div>
                    <h2>Temp. máx</h2>
                    <p id="temp_max">{{clima.temp_max}} <sup>°C</sup></p>
                  </div>
                </div>

                <div class="info">
                  <i id="temp_min_icon" class="fa-solid fa-temperature-low"></i>
                  <div>
                    <h2>Temp. mín</h2>
                    <p id="temp_min">{{clima.temp_min}} <sup>°C</sup></p>
                  </div>
                </div>

                <div class="info">
                  <i id="humidity_icon" class="fa-solid fa-droplet"></i>
                  <div>
                    <h2>Umidade</h2>
                    <p id="humidity">{{clima.umidade}}%</p>
                  </div>
                </div>

                <div class="info">
                  <i id="wind_icon" class="fa-solid fa-wind"></i>
                  <div>
                    <h2>Vento</h2>
                    <p id="wind">{{clima.vento}} km/h</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {{else}}
          <p>Não foi possível obter o clima atual.</p>
        {{/if}}
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const params = new URLSearchParams(window.location.search);
  if (params.has('lat') && params.has('lon')) return;

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      pos => {
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;
        window.location.href = `/?lat=${lat}&lon=${lon}`;
      },
      err => {
        console.warn('Não foi possível obter localização. Usando padrão Ji-Paraná.');
      }
    );
  } else {
    console.warn('Geolocalização não suportada pelo navegador.');
  }
});
</script>
